
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How to deploy ? &#8212; Python  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="how-to-deploy">
<h1>How to deploy ?<a class="headerlink" href="#how-to-deploy" title="Permalink to this headline">¶</a></h1>
<p>Note that all webapps are not required.<br />
You could just start with the viewer alone or the viewer and proxy + cas if you need an authentication system. Or viewer + cas + proxy + geoserver … and add other modules later when required.</p>
<section id="quick-win">
<h2>Quick win<a class="headerlink" href="#quick-win" title="Permalink to this headline">¶</a></h2>
<p>Once your system is ready, collect WAR files in a dedicated directory and rename them:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>VERSION=16.12

mkdir -p /tmp/georchestra
cd /tmp/georchestra
cp `find ~/.m2/repository/ -name &quot;*-${VERSION}.war&quot;` ./
cp ~/.m2/repository/org/geonetwork-opensource/web-app/3.0.4-SNAPSHOT/web-app-3.0.4-SNAPSHOT.war ./

mv security-proxy-${VERSION}.war ROOT.war
mv analytics-${VERSION}.war analytics.war
mv cas-server-webapp-${VERSION}.war cas.war
mv extractorapp-${VERSION}.war extractorapp.war
mv geoserver-webapp-${VERSION}.war geoserver.war
mv console-${VERSION}.war console.war
mv mapfishapp-${VERSION}.war mapfishapp.war
mv header-${VERSION}.war header.war
mv web-app-3.0.4-SNAPSHOT.war geonetwork.war
</pre></div>
</div>
<p>Optionally, if you do not plan to use GeoServer’s integrated GeoWebCache, you can deploy a standalone version:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mv geowebcache-webapp-${VERSION}.war geowebcache.war
</pre></div>
</div>
<p>Finally, dispatch geOrchestra webapps into your 3 Tomcat instances:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo service tomcat-proxycas stop
sudo mv /tmp/georchestra/ROOT.war /var/lib/tomcat-proxycas/webapps
sudo mv /tmp/georchestra/cas.war /var/lib/tomcat-proxycas/webapps
sudo service tomcat-proxycas start

sudo service tomcat-geoserver0 stop
sudo mv /tmp/georchestra/geoserver.war /var/lib/tomcat-geoserver0/webapps
sudo service tomcat-geoserver0 start

sudo service tomcat-georchestra stop
sudo mv /tmp/georchestra/* /var/lib/tomcat-georchestra/webapps
sudo service tomcat-georchestra start
</pre></div>
</div>
</section>
<section id="symlinks">
<h2>Symlinks<a class="headerlink" href="#symlinks" title="Permalink to this headline">¶</a></h2>
<p>Instead of copying the webapps to the tomcat instances, it is possible to symlink them.
Tomcat is smart enough to detect when the link target is updated, and redeploy it on the fly.</p>
<p>However, this requires the build process to happen on the production host (or a NFS mount).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>VERSION=14.06

sudo service tomcat-proxycas stop
cd /var/lib/tomcat-proxycas/webapps
sudo ln -s ~/.m2/repository/org/georchestra/security-proxy/${VERSION}-SNAPSHOT/security-proxy-${VERSION}-SNAPSHOT.war ROOT.war
sudo ln -s ~/.m2/repository/org/georchestra/cas-server-webapp/${VERSION}-SNAPSHOT/cas-server-webapp-${VERSION}-SNAPSHOT.war cas.war
sudo service tomcat-proxycas start

sudo service tomcat-geoserver stop
cd /var/lib/tomcat-geoserver/webapps
sudo ln -s ~/.m2/repository/org/georchestra/geoserver-webapp/${VERSION}-SNAPSHOT/geoserver-webapp-${VERSION}-SNAPSHOT.war geoserver.war
sudo service tomcat-geoserver start

sudo service tomcat-georchestra stop
cd /var/lib/tomcat-georchestra/webapps
sudo ln -s ~/.m2/repository/org/georchestra/analytics/${VERSION}-SNAPSHOT/analytics-${VERSION}-SNAPSHOT.war analytics.war
sudo ln -s ~/.m2/repository/org/georchestra/extractorapp/${VERSION}-SNAPSHOT/extractorapp-${VERSION}-SNAPSHOT.war extractorapp.war
sudo ln -s ~/.m2/repository/org/geonetwork-opensource/web-app/3.0.4-SNAPSHOT/web-app-3.0.4-SNAPSHOT.war geonetwork.war
sudo ln -s ~/.m2/repository/org/georchestra/console/${VERSION}-SNAPSHOT/console-${VERSION}-SNAPSHOT.war console.war
sudo ln -s ~/.m2/repository/org/georchestra/mapfishapp/${VERSION}-SNAPSHOT/mapfishapp-${VERSION}-SNAPSHOT.war mapfishapp.war
sudo ln -s ~/.m2/repository/org/georchestra/header/${VERSION}-SNAPSHOT/header-${VERSION}-SNAPSHOT.war header.war
sudo ln -s ~/.m2/repository/org/georchestra/geowebcache-webapp/${VERSION}-SNAPSHOT/geowebcache-webapp-${VERSION}-SNAPSHOT.war geowebcache.war
sudo service tomcat-georchestra start
</pre></div>
</div>
</section>
</section>
<section id="what-s-next">
<h1>What’s next ?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h1>
<p>You should first <a class="reference internal" href="check.html"><span class="doc std std-doc">check</span></a> the webapps are working as expected.
Once you’ve checked, there’s a quick <a class="reference internal" href="post-deploy_config.html"><span class="doc std std-doc">post-deploy configuration step</span></a> that is highly recommended.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Python</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/deploy.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>