
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Setting up the middleware &#8212; Python  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="setting-up-the-middleware">
<h1>Setting up the middleware<a class="headerlink" href="#setting-up-the-middleware" title="Permalink to this headline">¶</a></h1>
<p>geOrchestra has been validated to run against Debian Buster, but this version of Debian does not officially include a Java 11 environment, which is the
current version of Java supported by geOrchestra. This will then require to install it from the AdoptOpenJDK packages repository (see below).</p>
<p>In this section, you will learn how to install and setup the foundations of your geOrchestra SDI, according to the recommended architecture:
<img alt="architecture" src="https://cloud.githubusercontent.com/assets/265319/5538326/ea5a8e32-8ab1-11e4-8d21-00685457a912.png" /></p>
<p>The HAProxy / distributed GeoServer setup (in orange) is an alternative setup for high availability or high performance purposes, which is documented in a <a class="reference internal" href="tutorials/geoserver_clustering.html"><span class="doc std std-doc">dedicated tutorial</span></a>.</p>
<p>So, here are the steps:</p>
<ul class="simple">
<li><p>install the dependencies:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">postgresql</span><span class="o">-</span><span class="mi">13</span><span class="o">-</span><span class="n">postgis</span><span class="o">-</span><span class="mi">3</span> <span class="n">slapd</span> <span class="n">ldap</span><span class="o">-</span><span class="n">utils</span> <span class="n">apache2</span> <span class="n">ca</span><span class="o">-</span><span class="n">certificates</span> <span class="n">tomcat9</span> <span class="n">tomcat9</span><span class="o">-</span><span class="n">user</span> <span class="n">postfix</span> <span class="n">git</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Install Java11 from adoptopenJDK:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">software</span><span class="o">-</span><span class="n">properties</span><span class="o">-</span><span class="n">common</span> <span class="n">gpg</span>
<span class="n">wget</span> <span class="o">-</span><span class="n">qO</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">adoptopenjdk</span><span class="o">.</span><span class="n">jfrog</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">adoptopenjdk</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">gpg</span><span class="o">/</span><span class="n">key</span><span class="o">/</span><span class="n">public</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span>
<span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="o">--</span><span class="n">yes</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">adoptopenjdk</span><span class="o">.</span><span class="n">jfrog</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">adoptopenjdk</span><span class="o">/</span><span class="n">deb</span><span class="o">/</span>
<span class="n">apt</span> <span class="n">update</span>
<span class="n">apt</span> <span class="n">install</span> <span class="n">adoptopenjdk</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">hotspot</span><span class="o">/</span><span class="n">bullseye</span>
<span class="n">update</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">alternatives</span> <span class="o">-</span><span class="n">s</span> <span class="n">adoptopenjdk</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">hotspot</span><span class="o">-</span><span class="n">amd64</span>
</pre></div>
</div>
<p>by default, <code class="docutils literal notranslate"><span class="pre">tomcat9</span></code> will try to find a JVM which follows the debian conventions, which is not the case of the AdoptOpenJDK packages. To make sure That
the previously installed version is in use, we will have to modify the <code class="docutils literal notranslate"><span class="pre">/etc/default/tomcat9</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">adoptopenjdk</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">hotspot</span><span class="o">-</span><span class="n">amd64</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="setup/postgresql.html"><span class="doc std std-doc">set up the application database</span></a></p></li>
<li><p><a class="reference internal" href="setup/openldap.html"><span class="doc std std-doc">create the LDAP tree</span></a></p></li>
<li><p>configure the front web server (<a class="reference internal" href="setup/apache.html"><span class="doc std std-doc">apache</span></a>)</p></li>
<li><p>setup 3 <a class="reference internal" href="setup/tomcat.html"><span class="doc std std-doc">tomcat instances</span></a>:</p>
<ul>
<li><p>one for proxy+cas,</p></li>
<li><p>an other one for GeoServer,</p></li>
<li><p>and a last one for the other webapps</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="setup/deploy_wars.html"><span class="doc std std-doc">Deploy the webapps</span></a> into each tomcat instances</p></li>
<li><p>If you are willing to deploy the Datafeeder, please <a class="reference internal" href="setup/datafeeder.html"><span class="doc std std-doc">follow these notes</span></a>.</p></li>
</ul>
<section id="compatibility-notes">
<h2>Compatibility notes<a class="headerlink" href="#compatibility-notes" title="Permalink to this headline">¶</a></h2>
<p>This guide assumes the OS is <strong>Debian’s latest stable</strong> (Bullseye) and <strong>Tomcat 9</strong> is deployed.</p>
<p>geOrchestra 20.0.x and 20.1.x have been tested with tomcat 9 on Debian 10 (Buster). This is the recommended setup as of today.</p>
<p>geOrchestra 17.12 has been tested with tomcat 8 on Debian 9 (Stretch).</p>
<p>geOrchestra 16.12 has been tested on Debian 8 (Jessie) with Tomcat 8.</p>
<p>geOrchestra &gt;= 15.12 deprecates tomcat6 and java 6.</p>
<p>geOrchestra 15.06 has been tested on Debian 8 with Tomcat 6, 7 and 8.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Python</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/setup.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>